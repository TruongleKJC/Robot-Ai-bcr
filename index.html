<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI Baccarat Pro - GitHub Edition</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .bead { width: 30px; height: 30px; border-radius: 50%; display: inline-flex; align-items: center; justify-content: center; font-size: 12px; font-weight: bold; color: white; margin: 2px; }
        .B { background-color: #ef4444; } /* ƒê·ªè - Banker */
        .P { background-color: #3b82f6; } /* Xanh - Player */
        .T { background-color: #10b981; } /* Xanh l√° - Tie */
    </style>
</head>
<body class="bg-gray-900 text-white font-sans p-4">

    <div class="max-w-md mx-auto">
        <h1 class="text-2xl font-bold text-center mb-6 text-yellow-500">ü§ñ AI BACCARAT PREDICTOR</h1>

        <div class="bg-gray-800 p-6 rounded-2xl shadow-xl mb-6 text-center border border-gray-700">
            <h2 class="text-gray-400 uppercase text-sm mb-2">AI D·ª± ƒêo√°n V√°n Ti·∫øp</h2>
            <div id="prediction" class="text-4xl font-black mb-2">ƒêANG CH·ªú...</div>
            <div id="confidence" class="text-sm text-yellow-400 mb-4">Nh·∫≠p √≠t nh·∫•t 6 v√°n ƒë·ªÉ b·∫Øt ƒë·∫ßu</div>
            <div class="bg-gray-700 h-2 rounded-full overflow-hidden">
                <div id="progress" class="bg-yellow-500 h-full w-0 transition-all duration-500"></div>
            </div>
        </div>

        <div class="grid grid-cols-2 gap-4 mb-6 text-center">
            <div class="bg-gray-800 p-4 rounded-xl border border-gray-700">
                <div class="text-gray-400 text-xs">TI·ªÄN C∆Ø·ª¢C (ƒê∆†N V·ªä)</div>
                <div id="bet_amount" class="text-2xl font-bold text-green-400">1</div>
            </div>
            <div class="bg-gray-800 p-4 rounded-xl border border-gray-700">
                <div class="text-gray-400 text-xs">XU H∆Ø·ªöNG C·∫¶U</div>
                <div id="trend" class="text-sm font-bold">---</div>
            </div>
        </div>

        <div class="grid grid-cols-3 gap-3 mb-8">
            <button onclick="addData('B')" class="bg-red-600 hover:bg-red-700 h-20 rounded-xl font-bold text-lg active:scale-95 transition-transform shadow-lg">BANKER</button>
            <button onclick="addData('P')" class="bg-blue-600 hover:bg-blue-700 h-20 rounded-xl font-bold text-lg active:scale-95 transition-transform shadow-lg">PLAYER</button>
            <button onclick="addData('T')" class="bg-green-600 hover:bg-green-700 h-20 rounded-xl font-bold text-lg active:scale-95 transition-transform shadow-lg">TIE</button>
        </div>

        <div class="bg-gray-800 p-4 rounded-xl border border-gray-700">
            <div class="flex justify-between mb-2">
                <span class="text-xs text-gray-400">L·ªäCH S·ª¨ C·∫¶U (G·∫¶N NH·∫§T)</span>
                <button onclick="reset()" class="text-xs text-red-400 underline">X√≥a d·ªØ li·ªáu</button>
            </div>
            <div id="history" class="flex flex-wrap"></div>
        </div>
    </div>

    <script>
        let history = [];
        let fibo = [1, 1, 2, 3, 5, 8, 13, 21, 34, 55, 89, 144];
        let fiboIdx = 0;
        let lastPred = null;

        function addData(res) {
            // C·∫≠p nh·∫≠t Fibo n·∫øu c√≥ d·ª± ƒëo√°n tr∆∞·ªõc ƒë√≥
            if (lastPred) {
                if (res === lastPred) {
                    fiboIdx = Math.max(0, fiboIdx - 2);
                } else {
                    fiboIdx = Math.min(fibo.length - 1, fiboIdx + 1);
                }
            }

            history.push(res);
            updateUI();
            analyze();
        }

        function analyze() {
            if (history.length < 6) return;

            // Thu·∫≠t to√°n Markov Chain 2 b∆∞·ªõc
            let transitions = {};
            for (let i = 0; i < history.length - 2; i++) {
                let state = history[i] + history[i+1];
                let next = history[i+2];
                if (!transitions[state]) transitions[state] = [];
                transitions[state].push(next);
            }

            let currentState = history[history.length - 2] + history[history.length - 1];
            let nextOptions = transitions[currentState] || history.slice(-10);

            let counts = nextOptions.reduce((acc, val) => {
                acc[val] = (acc[val] || 0) + 1;
                return acc;
            }, {});

            let pred = Object.keys(counts).reduce((a, b) => counts[a] > counts[b] ? a : b);
            let conf = (counts[pred] / nextOptions.length) * 100;

            lastPred = pred;
            
            const predDiv = document.getElementById('prediction');
            const name = pred === 'B' ? 'BANKER' : (pred === 'P' ? 'PLAYER' : 'TIE');
            predDiv.innerText = name;
            predDiv.style.color = pred === 'B' ? '#ef4444' : (pred === 'P' ? '#3b82f6' : '#10b981');
            
            document.getElementById('confidence').innerText = `ƒê·ªô tin c·∫≠y: ${conf.toFixed(1)}%`;
            document.getElementById('progress').style.width = `${conf}%`;
        }

        function updateUI() {
            const histDiv = document.getElementById('history');
            histDiv.innerHTML = '';
            history.slice(-24).forEach(item => {
                const span = document.createElement('div');
                span.className = `bead ${item}`;
                span.innerText = item;
                histDiv.appendChild(span);
            });

            document.getElementById('bet_amount').innerText = fibo[fiboIdx];
            
            let bCount = history.filter(x => x === 'B').length;
            let pCount = history.filter(x => x === 'P').length;
            document.getElementById('trend').innerText = bCount > pCount ? "∆ØU TH·∫æ BANKER" : "∆ØU TH·∫æ PLAYER";
        }

        function reset() {
            history = [];
            fiboIdx = 0;
            lastPred = null;
            document.getElementById('prediction').innerText = "ƒêANG CH·ªú...";
            document.getElementById('confidence').innerText = "Nh·∫≠p √≠t nh·∫•t 6 v√°n";
            document.getElementById('progress').style.width = "0%";
            updateUI();
        }
    </script>
</body>
</html>
