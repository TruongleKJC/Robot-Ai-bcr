<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AI ROBOT BACCARAT v10.0 - NEURAL SYSTEM</title>
    <script src="https://www.gstatic.com/firebasejs/12.9.0/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/12.9.0/firebase-auth-compat.js"></script>
    <style>
        :root { --gold: #ffd700; --blue: #00d2ff; --red: #ff4b2b; --green: #33ff00; --bg: #020205; --panel: #12121c; }
        body { background: var(--bg); color: #fff; font-family: 'Orbitron', sans-serif; margin: 0; display: flex; flex-direction: column; align-items: center; }
        
        /* Hiệu ứng Sóng não AI */
        .brain-wave { width: 100px; height: 100px; border-radius: 50%; border: 2px solid var(--gold); position: relative; display: flex; align-items: center; justify-content: center; margin: 20px auto; }
        .wave { position: absolute; width: 100%; height: 100%; border: inherit; border-radius: inherit; animation: pulse 2s infinite; opacity: 0; }
        @keyframes pulse { 0% { transform: scale(1); opacity: 0.5; } 100% { transform: scale(1.8); opacity: 0; } }

        .page { display: none; width: 90%; max-width: 450px; padding: 20px; animation: slideIn 0.5s ease; }
        .active { display: block; }
        @keyframes slideIn { from { opacity: 0; transform: translateY(20px); } to { opacity: 1; transform: translateY(0); } }

        .panel { background: var(--panel); border: 1px solid #333; border-radius: 20px; padding: 20px; box-shadow: 0 10px 30px rgba(0,0,0,0.5); border-top: 3px solid var(--gold); }
        .predict-box { font-size: 42px; font-weight: 800; margin: 15px 0; min-height: 50px; }
        
        /* Input & Button */
        input { width: 100%; padding: 15px; margin: 10px 0; background: #000; border: 1px solid #444; color: var(--gold); border-radius: 10px; text-align: center; font-size: 18px; box-sizing: border-box; }
        .btn { width: 100%; padding: 16px; border-radius: 12px; border: none; font-weight: bold; cursor: pointer; text-transform: uppercase; margin-top: 10px; font-family: 'Orbitron'; }
        .btn-gold { background: linear-gradient(90deg, #ffd700, #b8860b); color: #000; }
        
        /* Bảng Roadmap */
        #roadmap { display: flex; flex-wrap: wrap; gap: 4px; margin: 15px 0; justify-content: center; min-height: 30px; }
        .cell { width: 14px; height: 14px; border-radius: 50%; font-size: 8px; font-weight: bold; display: flex; align-items: center; justify-content: center; }
        .cell-p { background: var(--blue); }
        .cell-b { background: var(--red); }
        .cell-t { background: var(--green); color: #000; }
    </style>
</head>
<body>

    <div id="page-auth" class="page active">
        <div class="panel" style="margin-top: 60px;">
            <h2 style="color: var(--gold); letter-spacing: 3px;">NEURAL ROBOT</h2>
            <p style="font-size: 10px; color: #888;">AI DEEP ANALYSIS v10.0</p>
            <input type="text" id="username" placeholder="USERNAME">
            <input type="password" id="password" placeholder="PASSWORD">
            <button class="btn btn-gold" id="btnLogin">ACCESS SYSTEM</button>
            <button class="btn" style="background:none; color:#666; font-size: 10px;" id="btnReg">CREATE NEW ACCOUNT</button>
        </div>
    </div>

    <div id="page-lobby" class="page">
        <h3 style="color: var(--gold);">SELECT SERVER</h3>
        <div id="lobbyGrid" style="display:grid; grid-template-columns: 1fr 1fr; gap:10px;"></div>
    </div>

    <div id="page-analysis" class="page">
        <div class="brain-wave" id="brain-ui">
            <div class="wave" style="animation-delay: 0s;"></div>
            <div class="wave" style="animation-delay: 0.5s;"></div>
            <span id="ai-percent" style="font-size: 12px; font-weight: bold;">AI</span>
        </div>

        <div class="panel">
            <div id="ai-status" style="font-size: 10px; color: #888;">WAITING FOR INPUT...</div>
            <div id="predict-display" class="predict-box">---</div>
            <div id="money-advise" style="font-size: 12px; color: var(--gold); margin-bottom: 10px;">GỢI Ý: CHỜ DỮ LIỆU</div>
            <div id="roadmap"></div>
        </div>

        <div style="display: flex; gap: 10px; margin-top: 15px;">
            <div style="flex:1"><label style="font-size:9px; color:var(--blue)">PLAYER</label><input type="number" id="p-score" placeholder="0"></div>
            <div style="flex:1"><label style="font-size:9px; color:var(--red)">BANKER</label><input type="number" id="b-score" placeholder="0"></div>
        </div>
        <button class="btn btn-gold" id="btnPredict">ANALYZE PATTERN</button>
        <button class="btn" style="background:transparent; color:#444; font-size: 10px;" onclick="location.reload()">BACK TO LOBBY</button>
    </div>

    <script type="module">
        // Firebase Configuration
        const firebaseConfig = {
            apiKey: "AIzaSyDktpJ50474uK7YRRWe-BmsxqCIdURqXfE",
            authDomain: "congthucbcr-ai.firebaseapp.com",
            projectId: "congthucbcr-ai",
            storageBucket: "congthucbcr-ai.firebasestorage.app",
            messagingSenderId: "1084138516470",
            appId: "1:1084138516470:web:1630e3966146060fbe21d7"
        };
        firebase.initializeApp(firebaseConfig);
        const auth = firebase.auth();

        // --- BỘ NÃO SIÊU AI (NEURAL LOGIC) ---
        let memory = [];

        function neuralAnalysis(p, b) {
            let currentWinner = p > b ? 'P' : (b > p ? 'B' : 'T');
            memory.push(currentWinner);
            if(memory.length > 24) memory.shift();

            // Tính toán trọng số (Weights)
            let wP = 0, wB = 0, wT = 0;
            let gap = Math.abs(p - b);

            // 1. Phân tích Gap (Hiệu số)
            if(gap >= 5) { currentWinner === 'P' ? wP += 40 : wB += 40; } // Bệt mạnh
            else if(gap <= 2) { currentWinner === 'P' ? wB += 30 : wP += 30; } // Đảo cầu

            // 2. Phân tích Chuỗi (Sequence)
            let last3 = memory.slice(-3).join('');
            if(last3 === 'PPP' || last3 === 'BBB') { last3[0] === 'P' ? wP += 50 : wB += 50; } // Xu hướng bệt trường

            // 3. Ưu thế Banker mặc định (Casino Edge)
            wB += 5;

            // Quyết định
            let result = "---";
            let advise = "VÀO TIỀN NHẸ";
            let confidence = 0;

            if (wP > wB) { result = "PLAYER"; confidence = 85 + (wP/10); }
            else { result = "BANKER"; confidence = 85 + (wB/10); }

            // Random Tie xác suất thấp
            if(Math.random() < 0.08) { result = "TIE (HÒA)"; advise = "ĐÁNH HÒA LÓT"; }
            else if(confidence > 92) advise = "CHỐT MẠNH TAY";

            return { res: result, conf: Math.min(Math.round(confidence), 99), advise: advise };
        }

        // --- GIAO DIỆN & FIREBASE ---
        const showPage = (id) => { document.querySelectorAll('.page').forEach(p=>p.classList.remove('active')); document.getElementById(id).classList.add('active'); };

        document.getElementById('btnLogin').onclick = () => {
            auth.signInWithEmailAndPassword(document.getElementById('username').value + "@ai.com", document.getElementById('password').value)
                .then(()=>showPage('page-lobby')).catch(e=>alert("LOGIN FAILED"));
        };

        document.getElementById('btnReg').onclick = () => {
            auth.createUserWithEmailAndPassword(document.getElementById('username').value + "@ai.com", document.getElementById('password').value)
                .then(()=>alert("ACCOUNT CREATED")).catch(e=>alert(e.message));
        };

        const lobbies = ['SA-GAMING', 'AE-SEXY', 'EVOLUTION', 'WM-CASINO', 'DG-LIVE', 'VENUS-APP'];
        lobbies.forEach(name => {
            let d = document.createElement('div'); d.className = 'btn btn-gold'; d.style.fontSize='10px'; d.innerText = name;
            d.onclick = () => { showPage('page-analysis'); };
            document.getElementById('lobbyGrid').appendChild(d);
        });

        document.getElementById('btnPredict').onclick = () => {
            let pVal = parseInt(document.getElementById('p-score').value) || 0;
            let bVal = parseInt(document.getElementById('b-score').value) || 0;
            let display = document.getElementById('predict-display');
            
            display.innerText = "CALCULATING...";
            display.style.fontSize = "20px";

            setTimeout(() => {
                let data = neuralAnalysis(pVal, bVal);
                display.innerText = data.res;
                display.style.fontSize = "42px";
                display.style.color = data.res.includes("BANKER") ? "var(--red)" : (data.res.includes("PLAYER") ? "var(--blue)" : "var(--green)");
                
                document.getElementById('win-rate').innerText = "CONFIDENCE: " + data.conf + "%";
                document.getElementById('money-advise').innerText = "ADVISE: " + data.advise;
                document.getElementById('ai-status').innerText = "PATTERN MATCHED: 100%";
                
                // Cập nhật Roadmap
                let rm = document.getElementById('roadmap');
                rm.innerHTML = "";
                memory.forEach(m => {
                    let c = document.createElement('div');
                    c.className = 'cell cell-' + m.toLowerCase();
                    c.innerText = m;
                    rm.appendChild(c);
                });
            }, 1200);
        };
    </script>
</body>
    </html>
    
